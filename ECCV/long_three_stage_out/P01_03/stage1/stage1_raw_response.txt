{
  "high_level_goal": "Prepare a ready-to-eat cup of cereal with plant-based milk by retrieving ingredients, setting up the serving vessel, combining components, and storing leftover items appropriately.",
  "steps": [
    {
      "step_id": 1,
      "step_goal": "Activate wall-mounted light switches to illuminate the room",
      "rationale": "Adequate room lighting is required to safely locate, identify, and handle kitchen items during subsequent meal preparation steps.",
      "causal_chain": {
        "agent": "hands",
        "action": "rotate wall-mounted toggle switches to activate electrical lighting",
        "patient": "light_switch_panel",
        "causal_precondition_on_spatial": [
          {
            "relation": "contacting",
            "objects": ["hands", "light_switch_panel"],
            "truth": true
          }
        ],
        "causal_precondition_on_affordance": [
          {
            "object_name": "light_switch_panel",
            "affordance_types": ["toggle_operable", "electrical_connection"],
            "reasons": "The panel has visible toggle switches mounted on the wall, indicating it is designed to control electrical lighting; no visible damage confirms it can function as intended."
          }
        ],
        "causal_effect_on_spatial": [
          {
            "relation": "illuminated",
            "objects": ["room_space"],
            "truth": true
          }
        ],
        "causal_effect_on_affordance": [
          {
            "object_name": "light_switch_panel",
            "affordance_types": ["state_activated"],
            "reasons": "The switches are moved to the 'on' position, and the room is visibly brightened, confirming the lighting circuit is active."
          }
        ]
      },
      "counterfactual_challenge_question": "What if the light switch panel had a broken electrical connection?",
      "expected_challenge_outcome": "The room would remain dark, making it difficult to safely locate and handle kitchen items like the refrigerator, milk carton, or cereal box, delaying or preventing meal preparation.",
      "failure_reflecting": {
        "reason": "One toggle switch does not click into place and fails to activate its corresponding light fixture.",
        "recovery_strategy": "Toggle the other functional switches to maximize available lighting, then retrieve a portable flashlight from storage to supplement illumination for remaining steps."
      }
    },
    {
      "step_id": 2,
      "step_goal": "Retrieve blue-lidded container from refrigerator",
      "rationale": "The blue-lidded container holds an ingredient required for the meal, so accessing it from the refrigerator is necessary to proceed with preparation.",
      "causal_chain": {
        "agent": "hands",
        "action": "pull open refrigerator door, grasp blue-lidded container, and place it on the kitchen counter",
        "patient": "blue_lidded_container",
        "causal_precondition_on_spatial": [
          {
            "relation": "inside",
            "objects": ["blue_lidded_container", "refrigerator_interior"],
            "truth": true
          },
          {
            "relation": "closed",
            "objects": ["refrigerator_door"],
            "truth": true
          }
        ],
        "causal_precondition_on_affordance": [
          {
            "object_name": "refrigerator_door",
            "affordance_types": ["pull_openable", "sealable"],
            "reasons": "The door has a visible handle and no obstructions, confirming it can be opened to access the interior and closed to maintain cooling."
          }
        ],
        "causal_effect_on_spatial": [
          {
            "relation": "on_top_of",
            "objects": ["blue_lidded_container", "kitchen_counter"],
            "truth": true
          },
          {
            "relation": "closed",
            "objects": ["refrigerator_door"],
            "truth": true
          }
        ],
        "causal_effect_on_affordance": [
          {
            "object_name": "blue_lidded_container",
            "affordance_types": ["accessible_for_opening"],
            "reasons": "The container is now on the counter instead of inside the refrigerator, making it easy to grasp and open for ingredient access."
          }
        ]
      },
      "counterfactual_challenge_question": "What if the blue-lidded container was stuck under another heavy item in the refrigerator?",
      "expected_challenge_outcome": "The container cannot be retrieved without moving the heavy item first, delaying meal preparation or requiring substitution with a different ingredient.",
      "failure_reflecting": {
        "reason": "The container slips from the hand and falls onto the kitchen floor, spilling some of its contents.",
        "recovery_strategy": "Pick up the container, inspect it for damage, wipe up spilled contents with a cleaning cloth, and transfer the remaining ingredient to a clean, accessible container."
      }
    },
    {
      "step_id": 3,
      "step_goal": "Pour plant-based milk into a mug on the table",
      "rationale": "Plant-based milk forms the liquid base for the cereal, so adding it to the mug creates the necessary medium to combine with the dry cereal.",
      "causal_chain": {
        "agent": "hands",
        "action": "tilt open plant-based milk carton to pour liquid into a stable mug on the dining table",
        "patient": "plant_based_milk_carton",
        "causal_precondition_on_spatial": [
          {
            "relation": "open",
            "objects": ["plant_based_milk_carton"],
            "truth": true
          },
          {
            "relation": "on_top_of",
            "objects": ["mug", "dining_table"],
            "truth": true
          }
        ],
        "causal_precondition_on_affordance": [
          {
            "object_name": "plant_based_milk_carton",
            "affordance_types": ["pourable", "liquid_containing"],
            "reasons": "The carton has a spout that is opened, and its rigid shape allows controlled tilting to pour the liquid inside without spilling excessively."
          }
        ],
        "causal_effect_on_spatial": [
          {
            "relation": "inside",
            "objects": ["plant_based_milk", "mug"],
            "truth": true
          },
          {
            "relation": "partially_filled",
            "objects": ["plant_based_milk_carton"],
            "truth": true
          }
        ],
        "causal_effect_on_affordance": [
          {
            "object_name": "mug",
            "affordance_types": ["ready_for_cereal_addition"],
            "reasons": "The mug now contains liquid milk, creating a suitable environment to add and hydrate dry cereal grains."
          }
        ]
      },
      "counterfactual_challenge_question": "What if the mug was placed on an unstable, wobbly section of the table?",
      "expected_challenge_outcome": "The mug would tip over during pouring, spilling most of the milk onto the table and floor, requiring cleanup and wasting ingredients.",
      "failure_reflecting": {
        "reason": "The milk is poured too quickly, causing it to overflow the mug's rim and spill onto the table.",
        "recovery_strategy": "Wipe up the spilled milk with a absorbent cloth, then carefully pour a smaller amount of milk into the mug to avoid further overflow."
      }
    },
    {
      "step_id": 4,
      "step_goal": "Retrieve metal spoon and cereal box from storage",
      "rationale": "A metal spoon is needed to mix the cereal and milk, while the cereal box contains the dry grain ingredient that forms the core of the meal.",
      "causal_chain": {
        "agent": "hands",
        "action": "open kitchen drawer to retrieve metal spoon, then open lower cabinet to retrieve cereal box, placing both on the dining table",
        "patient": ["metal_spoon", "cereal_box"],
        "causal_precondition_on_spatial": [
          {
            "relation": "inside",
            "objects": ["metal_spoon", "kitchen_drawer"],
            "truth": true
          },
          {
            "relation": "inside",
            "objects": ["cereal_box", "lower_cabinet"],
            "truth": true
          },
          {
            "relation": "closed",
            "objects": ["kitchen_drawer", "lower_cabinet"],
            "truth": true
          }
        ],
        "causal_precondition_on_affordance": [
          {
            "object_name": "kitchen_drawer",
            "affordance_types": ["slide_openable", "storage_accessible"],
            "reasons": "The drawer has a visible handle and no obstructions, confirming it can be slid open to access utensils stored inside."
          }
        ],
        "causal_effect_on_spatial": [
          {
            "relation": "on_top_of",
            "objects": ["metal_spoon", "dining_table"],
            "truth": true
          },
          {
            "relation": "on_top_of",
            "objects": ["cereal_box", "dining_table"],
            "truth": true
          },
          {
            "relation": "closed",
            "objects": ["kitchen_drawer", "lower_cabinet"],
            "truth": true
          }
        ],
        "causal_effect_on_affordance": [
          {
            "object_name": "metal_spoon",
            "affordance_types": ["ready_for_stirring"],
            "reasons": "The spoon is now on the table within easy reach, so it can be used immediately to mix cereal and milk once the cereal is added."
          }
        ]
      },
      "counterfactual_challenge_question": "What if the kitchen drawer was stuck and could not be opened?",
      "expected_challenge_outcome": "The metal spoon cannot be retrieved from the drawer, so a substitute utensil like a fork or disposable spoon must be used instead, or the cereal must be eaten without stirring.",
      "failure_reflecting": {
        "reason": "The cereal box slips from the hand and falls onto the floor, opening and spilling cereal grains.",
        "recovery_strategy": "Collect the spilled cereal grains using a dustpan and brush, transfer them back into the cereal box, and seal the box to prevent further spills."
      }
    },
    {
      "step_id": 5,
      "step_goal": "Add cereal to milk and stir to combine",
      "rationale": "Combining the dry cereal with the milk and stirring creates a homogeneous, ready-to-eat meal with the desired texture and consistency.",
      "causal_chain": {
        "agent": "hands",
        "action": "open cereal box, pour cereal bag contents into milk-filled mug, then use metal spoon to stir the mixture",
        "patient": ["cereal_bag", "metal_spoon"],
        "causal_precondition_on_spatial": [
          {
            "relation": "inside",
            "objects": ["plant_based_milk", "mug"],
            "truth": true
          },
          {
            "relation": "on_top_of",
            "objects": ["metal_spoon", "dining_table"],
            "truth": true
          }
        ],
        "causal_precondition_on_affordance": [
          {
            "object_name": "cereal_bag",
            "affordance_types": ["pourable", "dry_grain_containing"],
            "reasons": "The bag is sealed but easily openable, and its flexible shape allows controlled tilting to pour the dry cereal grains into the mug without excessive spilling."
          }
        ],
        "causal_effect_on_spatial": [
          {
            "relation": "inside",
            "objects": ["cereal_grains", "mug"],
            "truth": true
          },
          {
            "relation": "mixed",
            "objects": ["cereal_grains", "plant_based_milk"],
            "truth": true
          }
        ],
        "causal_effect_on_affordance": [
          {
            "object_name": "mug",
            "affordance_types": ["ready_to_eat"],
            "reasons": "The mug now contains a well-mixed combination of cereal grains and plant-based milk, creating a complete, edible meal that is ready for consumption."
          }
        ]
      },
      "counterfactual_challenge_question": "What if the cereal was poured too quickly into the mug?",
      "expected_challenge_outcome": "Cereal grains would overflow the mug's rim and spill onto the dining table, wasting ingredients and requiring cleanup before eating.",
      "failure_reflecting": {
        "reason": "The cereal grains clump together at the bottom of the mug and do not mix evenly with the milk.",
        "recovery_strategy": "Use the metal spoon to stir the mixture vigorously, applying gentle pressure to break up the clumps until the cereal and milk are evenly distributed."
      }
    }
  ]
}